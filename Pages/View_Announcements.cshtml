@page
@model Project.Pages.View_AnnouncementsModel
@{
}

@{
    ViewData["Title"] = "Announcements";
}

<div class="container">
    <h1>@ViewData["Title"]</h1>
    
    <!-- Show errors first -->
    @if (!ModelState.IsValid)
    {
        <div class="alert alert-danger">
            @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
            {
                <p>@error.ErrorMessage</p>
            }
        </div>
    }
    
    <!-- Show announcements if available -->
    @if (Model.Announcements?.Count > 0)
    {
        <div class="announcements-container">
            @foreach (var announcement in Model.Announcements)
            {
                <div class="announcement-card card mb-1 p-4 shadow ">
                    <div class="announcement-header">
                        <h3>@announcement.Admin_Username.Replace("admin_", "Admin. ")</h3>
                        <span class="text-muted">@announcement.Time.ToString("yyyy-MM-dd HH:mm")</span>
                    </div>
                    <div class="announcement-body">
                        <p>@announcement.Description</p>
                    </div>
                </div>
            }
        </div>
    }
</div>